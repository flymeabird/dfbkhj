<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>半导体基础例题全集 (Ch3 - Ch7)</title>
    
    <!-- 国内优化：使用 Staticfile (七牛云) CDN 加载 KaTeX -->
    <link rel="stylesheet" href="https://cdn.staticfile.net/KaTeX/0.16.9/katex.min.css">
    <script src="https://cdn.staticfile.net/KaTeX/0.16.9/katex.min.js"></script>
    <script src="https://cdn.staticfile.net/KaTeX/0.16.9/contrib/auto-render.min.js"></script>

    <style>
        :root {
            --bg-color: #f3f4f6;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --primary-color: #2563eb;
            --primary-light: #eff6ff;
            --white: #ffffff;
            --border: #e5e7eb;
            --ch3-color: #059669; /* Green for Ch3 */
            --ch3-bg: #ecfdf5;
            --ch4-color: #7c3aed; /* Purple for Ch4 */
            --ch4-bg: #f5f3ff;
            --ch5-color: #c2410c; /* Orange for Ch5 */
            --ch5-bg: #fff7ed;
            --ch6-color: #db2777; /* Pink for Ch6 */
            --ch6-bg: #fce7f3;
            --ch7-color: #0891b2; /* Cyan for Ch7 */
            --ch7-bg: #ecfeff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container { display: flex; flex: 1; max-width: 1440px; margin: 0 auto; width: 100%; }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background-color: #ffffff;
            border-right: 1px solid var(--border);
            padding: 1.5rem;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            flex-shrink: 0;
        }
        .sidebar-header { margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border); }
        .sidebar-title { font-size: 1.25rem; font-weight: 800; color: var(--text-primary); display: flex; align-items: center; gap: 0.5rem; }
        .sidebar-subtitle { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 0.25rem; }

        .nav-btn {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border: none;
            border-radius: 0.5rem;
            background: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            font-size: 0.9rem;
            font-weight: 600;
            line-height: 1.4;
        }
        .nav-btn:hover { background-color: var(--bg-color); color: var(--primary-color); }
        .nav-btn.active { background-color: var(--primary-light); color: var(--primary-color); border-left: 4px solid var(--primary-color); }
        
        /* Main Content */
        .main-content { flex: 1; padding: 2rem 3rem; max-width: 1000px; width: 100%; }
        .section-header { margin-bottom: 2rem; border-bottom: 2px solid var(--border); padding-bottom: 1rem; }
        .section-title { font-size: 2rem; font-weight: 800; color: #111827; margin-bottom: 0.5rem; }
        .section-desc { color: var(--text-secondary); font-size: 1.1rem; white-space: pre-line; }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.15rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-right: 0.5rem;
            vertical-align: middle;
        }
        .badge-ch3 { background-color: var(--ch3-bg); color: var(--ch3-color); border: 1px solid var(--ch3-color); }
        .badge-ch4 { background-color: var(--ch4-bg); color: var(--ch4-color); border: 1px solid var(--ch4-color); }
        .badge-ch5 { background-color: var(--ch5-bg); color: var(--ch5-color); border: 1px solid var(--ch5-color); }
        .badge-ch6 { background-color: var(--ch6-bg); color: var(--ch6-color); border: 1px solid var(--ch6-color); }
        .badge-ch7 { background-color: var(--ch7-bg); color: var(--ch7-color); border: 1px solid var(--ch7-color); }

        /* Cards */
        .card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            overflow: hidden;
            transition: all 0.2s;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .card:hover { box-shadow: 0 8px 16px -4px rgba(0,0,0,0.1); transform: translateY(-2px); border-color: #d1d5db; }
        
        .card-header {
            padding: 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            cursor: pointer;
        }
        .card-content { display: flex; gap: 1rem; width: 100%; }
        .question-index {
            background: #f1f5f9;
            color: #64748b;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
            flex-shrink: 0;
            margin-top: 2px;
        }
        .question-text { font-weight: 600; color: #1f2937; font-size: 1.05rem; line-height: 1.5; }
        
        .card-body {
            background-color: #f8fafc;
            border-top: 1px solid var(--border);
            padding: 1.5rem;
            display: none;
            animation: slideDown 0.3s ease-out;
        }
        .card.open .card-body { display: block; }
        .card.open .icon-chevron { transform: rotate(180deg); }

        .answer-section { margin-bottom: 1rem; }
        .answer-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .answer-text { color: #334155; white-space: pre-wrap; font-size: 0.95rem; }
        .highlight { color: var(--primary-color); font-weight: 600; }

        /* Mobile */
        .mobile-header { display: none; }
        @media (max-width: 768px) {
            .container { flex-direction: column; }
            .sidebar { display: none; width: 100%; height: auto; position: fixed; z-index: 50; border-bottom: 1px solid var(--border); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
            .sidebar.show { display: block; }
            .mobile-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--white); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 60; }
            .main-content { padding: 1.5rem 1rem; }
        }

        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .math-inline { font-family: "Times New Roman", serif; font-style: italic; background: #fff; padding: 0 4px; border-radius: 3px; border: 1px solid #eee; }
    </style>
</head>
<body>

    <div class="mobile-header">
        <h1 style="font-weight: 800; color: #1f2937; font-size: 1.1rem;">半导体例题全集</h1>
        <button onclick="toggleSidebar()" style="background:none; border:none; padding: 8px;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </button>
    </div>

    <div class="container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2.5"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                    <span>例题全集</span>
                </div>
                <div class="sidebar-subtitle">Review: Ch3 - Ch7</div>
            </div>
            <div id="nav-links"></div>
            <div style="margin-top: 2rem; font-size: 0.75rem; color: #9ca3af; padding: 0 1rem;">
                <div style="display:flex; align-items:center; gap:5px; margin-bottom:5px;"><span style="width:10px;height:10px;background:#ecfdf5;border:1px solid #059669;display:inline-block;"></span> Ch3 材料 (Materials)</div>
                <div style="display:flex; align-items:center; gap:5px; margin-bottom:5px;"><span style="width:10px;height:10px;background:#f5f3ff;border:1px solid #7c3aed;display:inline-block;"></span> Ch4 器件 (Devices)</div>
                <div style="display:flex; align-items:center; gap:5px; margin-bottom:5px;"><span style="width:10px;height:10px;background:#fff7ed;border:1px solid #c2410c;display:inline-block;"></span> Ch5 工艺 (Process)</div>
                <div style="display:flex; align-items:center; gap:5px; margin-bottom:5px;"><span style="width:10px;height:10px;background:#fce7f3;border:1px solid #db2777;display:inline-block;"></span> Ch6 封测 (Assembly)</div>
                <div style="display:flex; align-items:center; gap:5px;"><span style="width:10px;height:10px;background:#ecfeff;border:1px solid #0891b2;display:inline-block;"></span> Ch7 制造 (Fab)</div>
            </div>
        </aside>

        <main class="main-content">
            <div id="section-header" class="section-header"></div>
            <div id="questions-container"></div>
            <div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid #e5e7eb; text-align: center; color: #9ca3af; font-size: 0.875rem;">
                &copy; 2025 Generated for Semiconductor Physics • Chapter 3, 4, 5, 6 & 7
            </div>
        </main>
    </div>

<script>
// --- 完整题库数据 (Integrated Data) ---
const studyData = [
    {
        id: 'calculations',
        title: '一、计算例题 (Calculations)',
        icon: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M8 6h8"/><path d="M16 14h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>',
        description: 'Carrier concentration, resistivity, and sheet resistance calculations.\n载流子浓度、电阻率及方块电阻的计算。',
        questions: [
            {
                badge: 'Ch3',
                q: `**Question:**
                Given donor concentration $N_D = 10^{15} cm^{-3}$ (Silicon, Room Temperature).
                Find:
                1. Majority carrier (electron) concentration?
                2. Minority carrier (hole) concentration?
                
                **题目:**
                已知施主浓度 $N_D = 10^{15} cm^{-3}$ (硅，室温)。
                求：
                1. 多数载流子 (电子) 浓度？
                2. 少数载流子 (空穴) 浓度？`,
                a: `**1. Majority Carrier (Electron) / 多数载流子 (电子):**
                $$n_n \\approx N_D = 10^{15} cm^{-3}$$
                
                **2. Minority Carrier (Hole) / 少数载流子 (空穴):**
                Using Mass Action Law $np = n_i^2$ (Assume $n_i \\approx 1.45 \\times 10^{10} cm^{-3}$):
                根据质量作用定律：
                $$p_n = \\frac{n_i^2}{n_n} = \\frac{(1.45 \\times 10^{10})^2}{10^{15}} \\approx 2.1 \\times 10^5 cm^{-3}$$`
            },
            {
                badge: 'Ch3',
                q: `**Question:**
                For a thin film material (thickness is 100 microns), its sheet resistance is $3000\\Omega/sq$, find its resistivity.
                
                **题目:**
                对于厚度为 100 微米的薄膜材料，其方块电阻为 $3000\\Omega/sq$，求其电阻率。`,
                a: `**Answer / 答案:** $30 \\Omega \\cdot cm$
                
                **Analysis / 解析:**
                $\\rho = R_s \\times t = 3000 \\Omega \\times (100 \\times 10^{-4} cm) = 30 \\Omega \\cdot cm$`
            },
            {
                badge: 'Ch3',
                q: `**Question:**
                Please confirm the material's thickness given:
                Sheet Resistance: $15-3,000 \\Omega/sq$; Bulk Resistivity: $1.0-200 \\Omega \\cdot cm$.
                
                **题目:**
                请根据以下数据确认材料厚度：
                方块电阻：$15-3,000 \\Omega/sq$；体电阻率：$1.0-200 \\Omega \\cdot cm$。`,
                a: `**Answer / 答案:** Approx. $0.067 cm$ (or $600-700 \\mu m$)
                
                **Analysis / 解析:**
                Using $t = \\rho / R_s$:
                利用公式 $t = \\rho / R_s$：
                Low end / 低值: $1.0 / 15 \\approx 0.067 cm$
                High end / 高值: $200 / 3000 \\approx 0.067 cm$
                This matches standard wafer thickness. (符合标准硅片厚度)`
            }
        ]
    },
    {
        id: 'quiz',
        title: '二、概念测验 (Quiz)',
        icon: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>',
        description: 'Conceptual tests covering materials, devices, processes, packaging, and advanced fabrication.\n涵盖半导体材料、器件、工艺、封测及先进制造概念测试。',
        questions: [
            // --- Ch3 Questions ---
            { 
                badge: 'Ch3', 
                q: `**Question:**
                What type of silicon contains fewer free electrons than pure silicon crystals?
                **题目:**
                哪种类型的硅含有的自由电子比纯硅晶体少？`, 
                a: `**Answer / 答案: B. P-type (P型)**
                **Reason:** In P-type, holes are majority carriers, electrons are minority.
                原因：P型半导体中空穴是多子，电子是少子。` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                What is the name given to an impurity atom that adds holes to a semiconductor crystal structure?
                **题目:**
                向半导体晶体结构中增加空穴的杂质原子被称为什么？`, 
                a: `**Answer / 答案: C. Acceptor impurity (受主杂质)**` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                Which of the following is not a Wide-bandgap semiconductor?
                A. SiC  B. GaN  C. Diamond  D. InP
                **题目:**
                下列哪项不是宽禁带半导体？
                A. SiC  B. GaN  C. Diamond  D. InP`, 
                a: `**Answer / 答案: D. InP** **Reason:** InP bandgap is ~1.34eV, considered 2nd Gen, not Wide Bandgap (>2.3eV).
                原因：InP带隙约1.34eV，属于第二代，非宽禁带。` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                As comparison, a semiconductor material with wider band gap will have ( ) intrinsic carrier concentration.
                **题目:**
                相比之下，带隙更宽的半导体材料将具有（ ）本征载流子浓度。`, 
                a: `**Answer / 答案: Less (更少)**
                **Reason:** $n_i \\propto e^{-E_g/2kT}$. Larger $E_g$ leads to smaller $n_i$.
                原因：带隙 $E_g$ 越大，浓度越低。` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                Mass Action Law is valid under ( ) conditions.
                **题目:**
                质量作用定律在（ ）条件下对本征和非本征半导体均有效。`, 
                a: `**Answer / 答案: Thermal equilibrium (热平衡)**` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                As temperature increased, a light-doping semiconductor material sheet resistor will ( ), mobility will ( ), intrinsic carrier concentration will ( ).
                **题目:**
                随着温度升高，轻掺杂半导体材料的方块电阻将（ ），载流子迁移率将（ ），本征载流子浓度将（ ）。`, 
                a: `**Answer / 答案:** 1. **Increase (增加)** (Resistance / 电阻)
                2. **Decrease (减小)** (Mobility / 迁移率 - due to lattice scattering / 晶格散射)
                3. **Increase (增加)** (Intrinsic concentration / 本征浓度 - due to thermal excitation / 热激发)` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                As concentration increased, a semiconductor material sheet resistor will ( ) and its mobility will ( ).
                **题目:**
                随着掺杂浓度增加，半导体材料的方块电阻将（ ），迁移率将（ ）。`, 
                a: `**Answer / 答案:**
                1. **Decrease (减小)** (Resistance / 电阻)
                2. **Decrease (减小)** (Mobility / 迁移率 - due to impurity scattering / 杂质散射)` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                The Van der Pauw Method measures ( ) and ( ). Electrodes are placed on its ( ).
                **题目:**
                范德堡法通常用于测量样品的（ ）和（ ）。电极放置在其（ ）。`, 
                a: `**Answer / 答案:**
                1. **Resistivity (电阻率)**
                2. **Hall Coefficient/Mobility (霍尔系数/迁移率)**
                3. **Perimeter/Edges (周边/边缘)**` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                In what application is GaAs used in preference to Si? Why?
                **题目:**
                在什么应用中 GaAs 优于 Si？为什么？`, 
                a: `**Answer / 答案: C. Microwave frequencies (微波频率)**
                **Reason:** Because GaAs has higher electron mobility.
                原因：因为 GaAs 具有更高的电子迁移率。` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                The resistivity of semiconductor material is NOT related to: A. Temperature B. Size C. Doping D. Concentration
                **题目:**
                半导体材料的电阻率与下列哪个因素无关：A. 温度 B. 尺寸 C. 掺杂 D. 浓度`, 
                a: `**Answer / 答案: B. Size (尺寸)**
                **Reason:** Resistivity is an intrinsic property.
                原因：电阻率是材料的本征属性。` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                List the 1st, 2nd, and 3rd Generation Semiconductors.
                **题目:**
                列出第一、二、三代半导体。`, 
                a: `**Answer / 答案:**
                1. **1st:** Si, Ge
                2. **2nd:** GaAs, InP
                3. **3rd:** GaN, SiC` 
            },
            { 
                badge: 'Ch3', 
                q: `**Question:**
                Which is NOT a third Generation Semiconductor? A. GaN B. SiGe C. ZnO D. AlN
                **题目:**
                下列哪项不是第三代半导体？A. GaN B. SiGe C. ZnO D. AlN`, 
                a: `**Answer / 答案: B. SiGe**` 
            },

            // --- Ch4 Questions ---
            { 
                badge: 'Ch4', 
                q: `**Question:**
                What are the "Building blocks" of semiconductor devices?
                **题目:**
                半导体器件的“基本构建模块”有哪些？`, 
                a: `**Answer / 答案:** 1. PN Junction (PN结)
                2. Metal-Semiconductor Junction (金属半导体结)
                3. Heterojunction (异质结)
                4. MOS Structure (MOS结构)` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                M-S junctions: Rectifying is called ( ), Non-rectifying is called ( ). The reason is difference in ( ).
                **题目:**
                M-S结：整流的称为（ ），非整流的称为（ ）。原因是（ ）不同。`, 
                a: `**Answer / 答案:**
                1. **Schottky Contact (肖特基接触)** - Rectifying
                2. **Ohmic Contact (欧姆接触)** - Non-rectifying
                3. **Work Function (功函数)** - The difference determines the type.` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                Characteristic of Schottky Barrier diode vs Si diode?
                **题目:**
                肖特基势垒二极管（SBD）相比普通硅二极管的特性？`, 
                a: `**Answer / 答案: D. Less forward voltage drop (更低的正向导通压降)**
                (Low voltage drop & fast switching / 低压降且开关快)` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                Which of the following does not affect a semiconductor material work function?
                A. Doping type
                B. Doping concentration
                C. Electronic Affinity
                D. Contact material
                
                **题目:**
                下列哪项不影响半导体材料的功函数？
                A. 掺杂类型
                B. 掺杂浓度
                C. 电子亲和势
                D. 接触材料`, 
                a: `**Answer / 答案: D. Contact material (接触材料)**
                **Analysis:** Work function $\\Phi_s$ is an intrinsic property determined by $\\chi$ (Affinity) and $E_F$ (Doping). The contact material affects the barrier height, not $\\Phi_s$ itself.
                解析：功函数 $\\Phi_s$ 是由电子亲和势和费米能级（受掺杂影响）决定的本征属性。接触材料影响的是势垒高度，而非半导体的功函数本身。` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                Zener breakdown occurs in ( ).
                **题目:**
                齐纳击穿发生于（ ）。`, 
                a: `**Answer / 答案: B. Heavily doped p/n region (重掺杂的p/n区)**
                (Causes tunneling at low voltage / 在低压下引发隧道效应)` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                The primary application of the mercury probe is semiconductor measurements where otherwise time-consuming metallizations or photolithographic processing are required to make ( ) to a sample.
                
                **题目:**
                汞探针的主要应用是半导体测量，它可以避免耗时的金属化或光刻工艺，直接在样品上形成（ ）。`, 
                a: `**Answer / 答案: Contact (接触)**` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                Which is not the typical BJT Physical Structure:
                A. Thin base region
                B. Highly doped the emitter region
                C. Highly doped the base region
                D. Large area the collector region
                
                **题目:**
                哪项不是典型的 BJT 物理结构特征：
                A. 薄基区
                B. 重掺杂发射区
                C. 重掺杂基区
                D. 大面积集电区`, 
                a: `**Answer / 答案: C. Highly doped the base region (重掺杂基区)**
                **Correction:** Base region must be **lightly doped** to reduce recombination.
                更正：基区必须是**轻掺杂**的以减少复合。` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                LED is different from the PD, as LED is Electricity ( ), light ( ).
                
                **题目:**
                LED 不同于 PD（光电二极管），LED 是电（ ），光（ ）。`, 
                a: `**Answer / 答案: (Input / 输入), (Output / 输出)**
                **Explanation:** LED converts Electricity to Light. PD converts Light to Electricity.
                解释：LED 将电转化为光（电进光出）。PD 将光转化为电。` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                For a NPN HBT, typically the heterojunction exists in the ( ) region and ( ) regions. The material in ( ) region has wider bandgap.
                
                **题目:**
                对于 NPN HBT，异质结通常存在于（ ）区和（ ）区之间。（ ）区的材料具有更宽的带隙。`, 
                a: `**Answer / 答案: Emitter (发射), Base (基), Emitter (发射)**` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                In NPN HBT, wide bandgap material is used for Emitter, narrow bandgap for Base. This ( ) the barrier for electron injection from Emitter to Base, and ( ) the barrier for hole injection from Base to Emitter.
                
                **题目:**
                在NPN型HBT中，采用宽带隙材料作发射区，窄带隙材料作基区。由于（ ）了电子从发射区注入到基区的势垒，同时（ ）了空穴由基区向发射区反注入的势垒。`, 
                a: `**Answer / 答案: Lowered (降低), Raised/Increased (提高)**
                **Result:** Improves injection efficiency and current gain ($\beta$).
                结果：提高了注入效率和电流增益。` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                What is a depletion-mode MOSFET?
                A. Current flows when no gate voltage is applied
                B. No current flows when no gate voltage is applied
                
                **题目:**
                什么是耗尽型 MOSFET？
                A. 无栅极电压时也有电流流过
                B. 无栅极电压时无电流流过`, 
                a: `**Answer / 答案: A. Current flows when no gate voltage is applied (无栅极电压时也有电流流过)**
                (Normally On device / 常开型器件)` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                Which of the following is an advantage of CMOS logic devices over TTL devices?
                A. Differential output capability
                B. Lower distortion
                C. Immune to damage from static discharge
                D. Lower power consumption
                
                **题目:**
                CMOS 逻辑器件相比 TTL 器件的优势是什么？
                A. 差分输出能力
                B. 更低失真
                C. 免受静电损伤
                D. 更低功耗`, 
                a: `**Answer / 答案: D. Lower power consumption (更低功耗)**` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                Which of the following devices is NOT a bipolar device?
                A. SBD
                B. PN Junction
                C. BJT
                D. HBT
                
                **题目:**
                下列哪种器件**不是**双极型器件？
                A. SBD (肖特基二极管)
                B. PN 结
                C. BJT
                D. HBT`, 
                a: `**Answer / 答案: A. SBD** (Unipolar, majority carrier only / 单极性，仅多数载流子)` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                Which of the following devices is a bipolar device?
                A. CMOS
                B. JFET
                C. HEMT
                D. HBT
                
                **题目:**
                下列哪种器件是双极型器件？
                A. CMOS
                B. JFET
                C. HEMT
                D. HBT`, 
                a: `**Answer / 答案: D. HBT** (Heterojunction Bipolar Transistor / 异质结双极晶体管)` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                Which of the following devices uses heterostructure:
                A. MESFET B. HEMT C. CMOS D. BJT
                
                **题目:**
                下列哪种器件使用了异质结构？
                A. MESFET B. HEMT C. CMOS D. BJT`, 
                a: `**Answer / 答案: B. HEMT**` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                The reason for why HEMT has faster speed is NOT because of:
                A. 2DEG exists
                B. High mobility substrate
                C. Doped substrate
                D. Un-doped substrate
                
                **题目:**
                HEMT 速度快的原因**不是**因为：
                A. 存在二维电子气 (2DEG)
                B. 高迁移率衬底
                C. 掺杂衬底
                D. 未掺杂衬底`, 
                a: `**Answer / 答案: C. Doped substrate (掺杂衬底)**
                **Correction:** HEMT uses **undoped** channel for high mobility to reduce scattering.
                更正：HEMT 使用**未掺杂**沟道以提高迁移率并减少散射。` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                The BJT's base region must be thin enough is NOT because of:
                A. can be much sharper gradient
                B. can be much less recombination
                C. diffuse across in much less time
                D. can be much higher concentration
                
                **题目:**
                BJT 基区必须足够薄，其原因**不包括**：
                A. 可以有更陡的浓度梯度
                B. 可以大大减少复合
                C. 渡越时间更短
                D. 可以有更高的掺杂浓度`, 
                a: `**Answer / 答案: D. can be much higher concentration (可以有更高的掺杂浓度)**
                **Reason:** Base must be lightly doped, not highly doped.
                原因：基区必须是轻掺杂，而不是重掺杂。` 
            },
            { 
                badge: 'Ch4', 
                q: `**Question:**
                The following feature of the light doping silicon is changed compared with the pure silicon:
                A. Bandgap
                B. Conduction band
                C. Valence band
                D. Fermi level
                
                **题目:**
                与纯硅相比，轻掺杂硅的以下哪个特征发生了变化：
                A. 带隙
                B. 导带
                C. 价带
                D. 费米能级`, 
                a: `**Answer / 答案: D. Fermi level (费米能级)**
                **Reason:** Doping introduces impurity levels and shifts the Fermi level ($E_F$) towards $E_c$ (N-type) or $E_v$ (P-type). Bandgap is intrinsic.
                原因：掺杂引入杂质能级，使费米能级向导带或价带移动。带隙是本征属性，基本不变。` 
            },

            // --- Ch5 Questions ---
             {
                badge: 'Ch5',
                q: `**Question:**
                The specifications of Mask Aligner (Lithography Equipments) are not including ( ).
                A. Light source  B. Development  C. Alignment accuracy  D. Exposure type
                
                **题目:**
                光刻机（掩模对准器）的技术指标**不包括**（ ）。
                A. 光源  B. 显影  C. 对准精度  D. 曝光方式`,
                a: `**Answer / 答案: B. Development (显影)**
                **Reason:** Development is a separate chemical process step/equipment (Track), not a specification of the exposure tool itself.
                原因：显影是独立的化学处理步骤/设备，不属于光刻曝光机本身的规格参数。`
            },
            {
                badge: 'Ch5',
                q: `**Question:**
                The light sources can classify the lithography equipments generations. Which of the following shown the fact from $1^{st}$ generation to $4^{th}$ generation:
                A. G-line, I-line, KrF, ArF
                B. I-line, G-line, KrF, ArF
                C. G-line, I-line, ArF, KrF
                D. I-line, G-line, ArF, KrF
                
                **题目:**
                光源可用于划分光刻设备的代次。下列哪项显示了从第一代到第四代的发展：`,
                a: `**Answer / 答案: A. G-line, I-line, KrF, ArF**
                **Analysis:**
                1. **G-line** (436nm) - 1st Gen
                2. **I-line** (365nm) - 2nd Gen
                3. **KrF** Excimer Laser (248nm) - 3rd Gen
                4. **ArF** Excimer Laser (193nm) - 4th Gen`
            },
            {
                badge: 'Ch5',
                q: `**Question:**
                Semiconductor IC Thin Film Preparation processes mainly include:
                ( ), ( ), ( ) and ( ).
                
                **题目:**
                半导体集成电路**薄膜制备**的主要工艺有：
                ( ), ( ), ( ) 和 ( )。`,
                a: `**Answer / 答案:**
                1. **Oxidation (氧化)**
                2. **Epitaxy (外延)**
                3. **CVD (Chemical Vapor Deposition / 化学气相沉积)**
                4. **PVD (Physical Vapor Deposition / 物理气相沉积)**`
            },
            {
                badge: 'Ch5',
                q: `**Question:**
                Epitaxy growth is extending a thin layer of single crystal on a single crystal substrate along the original crystal orientation. The purpose of **Homoepitaxy** is to form a layer with different ( ) using the same material. **( )** epitaxy technology promoted the development of heterojunction devices.
                
                **题目:**
                外延生长是在单晶衬底上沿原来的晶向向外延伸生长一薄层单晶。同质外延的目的是用同质材料形成具有不同 ( ) 的薄层，采用 ( ) 外延技术，促进了异质结半导体器件的发展。`,
                a: `**Answer / 答案:**
                1. **Doping type/Concentration (掺杂类型/浓度)**
                2. **Hetero (异质)**`
            },
            {
                badge: 'Ch5',
                q: `**Question:**
                In the epitaxy process, the wafer (substrate) acts as not only ( ), but also as physical support for the thin epi-layer.
                
                **题目:**
                在外延工艺中，晶圆（衬底）不仅作为 ( )，还作为外延薄层的物理支撑。`,
                a: `**Answer / 答案: Seed Crystal (晶种)**`
            },
            {
                badge: 'Ch5',
                q: `**Question:**
                Photolithography uses ( ) to transfer a geometric pattern from ( ) to a light-sensitive ( ) on the substrate.
                
                **题目:**
                光刻利用 ( ) 将几何图形从 ( ) 转移到衬底上的感光 ( ) 上。`,
                a: `**Answer / 答案:**
                1. **Light/Radiation (光/辐射)**
                2. **Mask (掩模版)**
                3. **Photoresist (光刻胶)**`
            },
            {
                badge: 'Ch5',
                q: `**Question:**
                The dry etching process typically etches directionally or ( ), while wet etching are usually ( ).
                
                **题目:**
                干法刻蚀工艺通常是定向的或 ( ) 的，而湿法刻蚀通常是 ( ) 的。`,
                a: `**Answer / 答案:**
                1. **Anisotropic (各向异性)**
                2. **Isotropic (各向同性)**`
            },
            {
                badge: 'Ch5',
                q: `**Question:**
                The parameters mainly affecting lithography resolution in IC processing are ( ) and ( ).
                
                **题目:**
                集成电路工艺中主要影响光刻分辨率的参数是 ( ) 和 ( )。`,
                a: `**Answer / 答案:**
                1. **Wavelength (波长 $\\lambda$)**
                2. **Numerical Aperture (数值孔径 NA)**
                (Formula: $R = k_1 \\frac{\\lambda}{NA}$)`
            },

            // --- Ch6 Questions ---
            {
                badge: 'Ch6',
                q: `**Question:**
                Which of the following process is the first step in the BEOL of IC Fabrication?
                A. Die Attach
                B. Back Grinding
                C. Wire Bonding
                D. Wafer Saw/Scribe
                
                **题目:**
                下列哪个工艺是IC制造后道工艺（BEOL）的第一步？
                A. 芯片粘接
                B. 背面减薄
                C. 引线键合
                D. 晶圆切割`,
                a: `**Answer / 答案: B. Back Grinding (背面减薄)**
                **Reason:** Before dicing and packaging, the wafer must be thinned to the required thickness.
                原因：在切割和封装之前，必须先将晶圆减薄至所需厚度。`
            },
            {
                badge: 'Ch6',
                q: `**Question:**
                IC manufacturing back-end processes mainly include ( ), ( ), ( ) and ( ).
                
                **题目:**
                IC制造后道工艺主要包括（ ）、（ ）、（ ）和（ ）。`,
                a: `**Answer / 答案:**
                (Any 4 of the following / 任选四个):
                1. **Wafer Dicing/Sawing (晶圆切割)**
                2. **Die Attach (芯片粘接/贴片)**
                3. **Wire Bonding (引线键合)**
                4. **Molding (模塑/塑封)**
                5. **Trim & Form (切筋成型)**
                6. **Final Test (终测)**`
            },
            {
                badge: 'Ch6',
                q: `**Question:**
                For the development of IC package, the ( ) is TRUE for the history from the past to the present.
                A. DIP-QFP-CSP-SiP
                B. DIP-QFP-SiP-CSP
                C. QFP-DIP-CSP-SiP
                D. QFP-DIP-SiP-CSP
                
                **题目:**
                关于IC封装的发展史，从过去到现在，正确的是（ ）。`,
                a: `**Answer / 答案: A. DIP-QFP-CSP-SiP**
                **Timeline:** Dual Inline Package -> Quad Flat Package -> Chip Scale Package -> System in Package.
                时间线：双列直插 -> 四方扁平 -> 芯片级封装 -> 系统级封装。`
            },
            {
                badge: 'Ch6',
                q: `**Question:**
                In the following IC package, ( ) is NOT applied SMT (Surface Mount Technology).
                A. DIP  B. BGA  C. QFP  D. SOIC
                
                **题目:**
                下列IC封装中，（ ）不属于SMT（表面贴装技术）。
                A. DIP  B. BGA  C. QFP  D. SOIC`,
                a: `**Answer / 答案: A. DIP (Dual Inline Package)**
                **Reason:** DIP uses **Through-Hole Technology (THT)**, while BGA, QFP, and SOIC are Surface Mount types.
                原因：DIP使用通孔插装技术，而其他选项均为表面贴装类型。`
            },
            {
                badge: 'Ch6',
                q: `**Question:**
                Which the following is not the IC Test ( )?
                A. WAT  B. CP  C. FT  D. WLP
                
                **题目:**
                下列哪项不属于IC测试（ ）？
                A. WAT  B. CP  C. FT  D. WLP`,
                a: `**Answer / 答案: D. WLP (Wafer Level Package)**
                **Reason:** WLP stands for **Wafer Level Package**, which is a packaging technology, not a test type.
                * WAT: Wafer Acceptance Test
                * CP: Circuit Probing (Wafer Sort)
                * FT: Final Test
                原因：WLP是晶圆级封装技术，而非测试类型。`
            },

            // --- Ch7 Questions (NEWLY INTEGRATED) ---
            {
                badge: 'Ch7',
                q: `**Question:**
                Compare with the discrete devices, what are the structure features for IC devices?
                
                **题目:**
                与分立器件相比，集成电路(IC)器件的结构特征是什么？`,
                a: `**Answer / 答案:**
                1. **Planarized integrated structure (平面化集成结构)**
                2. **Must be isolated (必须隔离)** - e.g., STI (Shallow Trench Isolation).
                3. **Components share the same semiconductor substrate (元器件共享同一衬底)**.
                4. **Multilevel interconnection (多层互连)**.`
            },
            {
                badge: 'Ch7',
                q: `**Question:**
                Polysilicon Gate was dominant since 1972. Because polysilicon gate can be realized ( ) and source, drain and gate formed simultaneously.
                
                **题目:**
                自1972年以来，多晶硅栅占据主导地位。因为多晶硅栅可以实现（ ），且源、漏和栅极同时形成。`,
                a: `**Answer / 答案: Self-alignment (自对准)**
                **Reason:** The gate acts as a mask during source/drain implantation, automatically aligning the edges.
                原因：栅极在源/漏注入时充当掩模，使边缘自动对准。`
            },
            {
                badge: 'Ch7',
                q: `**Question:**
                HKMG is used mostly. Because that ( ) insulator layer might be used which can reduce ( ) current flowing through the structure.
                
                **题目:**
                HKMG（高k金属栅）被广泛使用。因为可以使用（ ）绝缘层，从而减少流经结构的（ ）电流。`,
                a: `**Answer / 答案: High-k (高k); Leakage (漏/隧穿)**
                **Analysis:** High-k materials allow for a physically thicker gate oxide to prevent tunneling while maintaining the same capacitance ($C_{ox}$).
                解析：高k材料允许在保持相同电容的情况下增加物理厚度，从而防止隧穿漏电。`
            },
            {
                badge: 'Ch7',
                q: `**Question:**
                As for the MOSFET scaling down, the following structure is not the case for this technology ( )
                Options: A. FinFET; B. HKMG; C. GAA; D. HEMT
                
                **题目:**
                关于MOSFET的微缩，下列哪种结构不属于该技术范畴（ ）
                选项: A. FinFET; B. HKMG; C. GAA; D. HEMT`,
                a: `**Answer / 答案: D. HEMT**
                **Analysis:** FinFET, HKMG, and GAA are technologies to continue Si-based CMOS scaling. **HEMT** (High Electron Mobility Transistor) is typically for III-V compound semiconductors (like GaAs) and RF/Microwave applications.
                解析：FinFET, HKMG, GAA 均是硅基CMOS微缩的关键技术。HEMT主要用于III-V族化合物半导体和射频微波领域。`
            },
            {
                badge: 'Ch7',
                q: `**Question:**
                Which of the following is the result from the rule of Uniform Scaling-down for the MOSFET devices?
                Options: A. Wire delay is UP; B. Wire delay is DOWN; C. Gate Capacitance is UP; D. Gate Capacitance is DOWN
                
                **题目:**
                下列哪项是MOSFET器件等比例微缩（Uniform Scaling-down）的结果？
                选项: A. 导线延迟上升; B. 导线延迟下降; C. 栅电容上升; D. 栅电容下降`,
                a: `**Answer / 答案: D. Gate Capacitance is DOWN (栅电容下降)**
                **Analysis:**
                1. **Gate Capacitance:** $C_{gate} \\rightarrow 1/\\kappa$ (Area scales by $1/\\kappa^2$, thickness by $1/\\kappa$, so total is $1/\\kappa$). -> **DOWN**
                2. **Wire Delay:** Often remains constant or increases relative to gate delay (becomes a bottleneck). -> **UP/Constant**
                解析：栅电容随尺寸微缩而减小。导线延迟通常成为瓶颈（相对上升）。`
            }
        ]
    },
    {
        id: 'analysis',
        title: '三、分析与应用 (Analysis)',
        icon: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3v18h18"/><path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/></svg>',
        description: 'Chart analysis and experimental design questions.\n图表分析及实验设计题。',
        questions: [
            // --- Ch3 Analysis ---
            {
                badge: 'Ch3',
                q: `**Question (Mobility Graph Analysis):**
                Based on Silicon mobility vs impurity concentration at 300K:
                1. Why is electron mobility higher than hole mobility?
                2. Relationship between mobility and doping? Why?
                3. Main factors affecting mobility?
                
                **题目 (迁移率图表分析):**
                基于300K下硅的迁移率与杂质浓度关系图：
                1. 为什么电子迁移率高于空穴？
                2. 迁移率与掺杂的关系及原因？
                3. 影响迁移率的主要因素？`,
                a: `**1. Effective Mass / 有效质量:**
                Electron effective mass ($m_n^*$) is smaller than hole effective mass ($m_p^*$).
                电子有效质量 ($m_n^*$) 小于空穴有效质量 ($m_p^*$)。
                
                **2. Relationship / 关系:** Mobility decreases as doping increases due to **Impurity Scattering**.
                随着掺杂增加，迁移率下降，原因是**杂质散射**。
                
                **3. Factors / 因素:** Temperature (Lattice scattering) and Doping Concentration (Impurity scattering).
                温度（晶格散射）和掺杂浓度（杂质散射）。`
            },
            {
                badge: 'Ch3',
                q: `**Question (Experiment Design):**
                Design a Van der Pauw experiment to find Resistivity, Carrier Concentration, and Mobility.
                
                **题目 (实验设计):**
                设计范德堡法实验以测量电阻率、载流子浓度和迁移率。`,
                a: `**1. Precautions / 注意事项:**
                Ohmic contacts, placed on perimeter, small contact size, uniform thickness.
                欧姆接触，放置在边缘，接触点小，厚度均匀。
                
                **2. Steps / 步骤:**
                * **Resistivity / 电阻率:** Measure edge resistance ($R_{AB,CD}$), solve Van der Pauw eq for $R_s$, then $\\rho = R_s \\times t$.
                * **Carrier Conc / 载流子浓度:** Apply B field, measure Hall voltage ($V_H$), calculate $n \\propto I \\cdot B / V_H$.
                * **Mobility / 迁移率:** Calculate $\\mu = 1 / (q n \\rho)$.`
            },

            // --- Ch4 Analysis ---
            {
                badge: 'Ch4',
                q: `**Question (BJT Band Diagram):**
                Based on the BJT energy band diagram (Wide gap Emitter, Narrow Base):
                1. Type (NPN/PNP)?
                2. Region 3 is which region?
                3. Base region requirements?
                4. HBT improves performance by utilizing different bandgaps. It increases the barrier for ( ) injection from Base to Emitter.
                
                **题目 (BJT 能带图分析):**
                基于 BJT 能带示意图（宽带隙发射区，窄基区）：
                1. 类型（NPN/PNP）？
                2. 图中区域 3 是什么区？
                3. 基区结构要求？
                4. HBT 利用不同带隙，提高了（ ）从基区向发射区反注入的势垒。`,
                img: 'bjt_diagram.jpg',
                a: `**1. Type / 类型:** NPN.
                
                **2. Region / 区域:** Collector (集电区).
                
                **3. Base / 基区:** Must be **Thin** and **Lightly Doped** (to reduce recombination).
                必须**薄**且**轻掺杂**。
                
                **4. Suppression / 抑制:** **Hole** (空穴).
                (Wide bandgap emitter creates larger $\\Delta E_v$)`
            },
            {
                badge: 'Ch4',
                q: `**Question (HEMT Structure):**
                Refer to GaAs HEMT structure:
                1. What does HEMT stand for? Key feature?
                2. Which interface does the heterojunction occur? How is it formed?
                3. Compare Work Functions: Gate (Metal) vs AlGaAs? GaAs vs AlGaAs?
                4. Working principle?
                
                **题目 (HEMT 结构):**
                参考 GaAs HEMT 结构：
                1. HEMT 全称？突出特点？
                2. 异质结出现在哪个界面？如何形成？
                3. 功函数比较：Gate(金属) 与 AlGaAs？GaAs 与 AlGaAs？
                4. 请简述HEMT工作原理？`,
                 img: 'hemt_structure.jpg',
                a: `**1. Name / 名称:** High Electron Mobility Transistor (高电子迁移率晶体管). Feature: High speed, low noise.
                
                **2. Heterojunction / 异质结:** Between **AlGaAs** and **GaAs**. Formed by epitaxy growth of wider bandgap AlGaAs on narrower GaAs.
                
                **3. Work Function / 功函数:**
                * Gate (Metal) > AlGaAs (Forms Schottky barrier).
                * GaAs > AlGaAs (Electron affinity difference creates quantum well).
                
                **4. Principle / 原理:** Gate voltage modulates the **2DEG** density in the undoped GaAs channel, controlling $I_{DS}$.
                栅极电压调节未掺杂 GaAs 沟道中的 **2DEG** 浓度，从而控制电流。`
            },
            // --- Ch5 Analysis ---
            {
                badge: 'Ch5',
                q: `**Question (Photolithography Process):**
                Here is a device under exposing in a photolithography processing. The process is to make the layer as an **interconnector** (Assume the layer is Metal). Note: The illuminated area is the transparent pattern of the mask (a hole in the mask).
                
                **(1) How to choose the photoresist? (Positive PR or Negative PR)**
                **(2) To draw the sketch after the development?**
                **(3) To draw the sketch after the etching?**
                **(4) Usually how many ways to do etching in IC Fab processing? What are the main differences between them?**
                
                **题目 (光刻工艺分析):**
                下图为光刻曝光过程。该工艺旨在制作**互连线**（假设该层为金属）。注：光照处对应掩模的透明区域（掩模上的开孔）。
                (1) 如何选择光刻胶？（正胶还是负胶）
                (2) 画出显影后的草图？
                (3) 画出刻蚀后的草图？
                (4) IC制造中通常有几种刻蚀方法？主要区别是什么？`,
                a: `**1. Photoresist Choice / 光刻胶选择:**
                **Negative PR (负胶)**
                **Reasoning:** The mask has a hole (light passes). The goal is an interconnector (wire), so we want the metal in the center (where light hits) to **stay**.
                * Light hits Center -> Negative PR hardens (becomes insoluble).
                * Developer removes unexposed sides.
                * Etching removes metal on sides, **Center Metal Remains**.
                (If Positive PR was used: Light hits center -> Center dissolves -> Hole in metal. This is for contact holes, not wires).
                理由：掩模中间透光。目标是做互连线（保留金属）。使用负胶，曝光区域变硬保留，保护下方的金属不被刻蚀。
                
                **2. After Development / 显影后:**
                A block of Photoresist remains in the center of the substrate.
                (衬底中央留有一块光刻胶)
                
                **3. After Etching / 刻蚀后:**
                The metal layer under the PR remains, forming the wire. The PR is then stripped.
                (光刻胶下方的金属层保留，形成导线)
                
                **4. Etching Methods / 刻蚀方法:**
                * **Wet Etching (湿法):** Chemical solution. **Isotropic** (undercuts/各向同性), low cost, high selectivity.
                * **Dry Etching (干法/RIE):** Plasma/Ion. **Anisotropic** (Directional/各向异性), high precision, used for small features.`
            },
            // --- Ch7 Analysis (NEWLY INTEGRATED) ---
            {
                badge: 'Ch7',
                q: `**Question (CMOS Inverter Cross-section Analysis):**
                Refer to the CMOS inverter cross-section diagram (implied):
                Identify the locations of the **Input (In)**, **Output (Out)**, **N-Well**, **NMOS**, **PMOS**, **Vdd**, and **GND**.
                
                **题目 (CMOS 反相器剖面图分析):**
                参考CMOS反相器剖面图（需脑补或参考讲义图7）：
                请标识出 **输入(In)**、**输出(Out)**、**N阱(N-Well)**、**NMOS**、**PMOS**、**Vdd** 和 **GND** 的位置。`,
                a: `**Identification Guide / 识图技巧:**
                
                1. **Find the N-Well (找N阱):**
                   - On a P-Substrate, the **PMOS** must be fabricated inside an **N-Well**. Look for the "deep tub" structure.
                   - 在P型衬底上，PMOS必须做在N阱里。
                
                2. **Find Vdd (找电源):**
                   - The Source of the **PMOS** (inside N-Well) connects to the highest potential (**Vdd**).
                   - PMOS的源极接Vdd。
                
                3. **Find GND (找地):**
                   - The Source of the **NMOS** (directly on P-Substrate) connects to Ground (**GND**).
                   - NMOS的源极接地。
                
                4. **Find Input (找输入):**
                   - The **Gates** of both NMOS and PMOS are connected together = **In**.
                   - 两个管子的栅极连在一起即为输入。
                
                5. **Find Output (找输出):**
                   - The **Drains** of both NMOS and PMOS are connected together = **Out**.
                   - 两个管子的漏极连在一起即为输出。`
            }
        ]
    }
];

// --- Render Logic ---
let currentSectionId = studyData[0].id;

function render() {
    // Render Sidebar
    const navLinks = document.getElementById('nav-links');
    navLinks.innerHTML = studyData.map(section => `
        <button class="nav-btn ${section.id === currentSectionId ? 'active' : ''}" onclick="switchSection('${section.id}')">
            ${section.icon}
            <span>${section.title}</span>
        </button>
    `).join('');

    // Render Header
    const currentSection = studyData.find(s => s.id === currentSectionId);
    const header = document.getElementById('section-header');
    header.innerHTML = `
        <h2 class="section-title">${currentSection.title}</h2>
        <p class="section-desc">${parseText(currentSection.description)}</p>
    `;

    // Render Questions
    const container = document.getElementById('questions-container');
    container.innerHTML = currentSection.questions.map((q, idx) => {
        let badgeClass = 'badge-ch3';
        if (q.badge === 'Ch4') badgeClass = 'badge-ch4';
        if (q.badge === 'Ch5') badgeClass = 'badge-ch5';
        if (q.badge === 'Ch6') badgeClass = 'badge-ch6';
        if (q.badge === 'Ch7') badgeClass = 'badge-ch7';
        
        // Hide missing images gracefully
        const imageHtml = q.img ? `
            <div style="margin-top: 0.5rem; margin-bottom: 0.5rem; text-align: left;">
                <img src="${q.img}" onerror="this.style.display='none'" alt="Question Image" style="max-width: 100%; max-height: 200px; border-radius: 4px; border: 1px solid #e5e7eb;">
            </div>
        ` : '';

        return `
            <div class="card" onclick="this.classList.toggle('open')">
                <div class="card-header">
                    <div class="card-content">
                        <div class="question-index">${idx + 1}</div>
                        <div style="width: 100%;">
                            <span class="badge ${badgeClass}">${q.badge}</span>
                            <span class="question-text">${parseText(q.q)}</span>
                            
                            ${imageHtml}
                            
                        </div>
                    </div>
                    <svg class="icon-chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
                </div>
                <div class="card-body" onclick="event.stopPropagation()">
                    
                    <div class="answer-label">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                        Answer & Analysis / 答案与解析
                    </div>
                    <div class="answer-text">${parseText(q.a)}</div>
                </div>
            </div>
        `;
    }).join('');

    // Trigger Math Rendering
    if (window.renderMathInElement) {
        renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ],
            throwOnError: false
        });
    }
}

function switchSection(id) {
    currentSectionId = id;
    render();
    window.scrollTo({ top: 0, behavior: 'smooth' });
    document.getElementById('sidebar').classList.remove('show');
}

function parseText(text) {
    if (!text) return '';
    let html = text.replace(/</g, "&lt;").replace(/>/g, "&gt;");
    html = html.replace(/\*\*(.*?)\*\*/g, '<span class="highlight">$1</span>');
    html = html.replace(/\n/g, '<br>');
    // Fallback math parsing if KaTeX fails
    if (!window.renderMathInElement) {
        html = html.replace(/\$([a-zA-Z0-9]+)\^([a-zA-Z0-9\+\-]+)\$/g, '<span class="math-inline">$1<sup>$2</sup></span>');
        html = html.replace(/\$([a-zA-Z0-9]+)\_([a-zA-Z0-9\+\-]+)\$/g, '<span class="math-inline">$1<sub>$2</sub></span>');
        html = html.replace(/\$(.*?)\$/g, '<span class="math-inline">$1</span>');
    }
    return html;
}

function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('show');
}

// Initial Render
render();
</script>
</body>
</html>
